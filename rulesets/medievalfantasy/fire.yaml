entity:
  name: aura of fire
  supertype: supernatural
  type: arcane
  subtype: evocation
  range: 0
  target:
  - self
  slot:
  - mind
  - scroll
  - wand
  active: false
  ongoing:
  action:
  - use:
    - description: cast this spell
      target:add_entity():
      - name.set(): self:name
        damage.set(): self:damage
        area.set(): self:area
        active.set(): true
      requirement:
      - user:attribute.intelligence.arcane.evocation.roll():
        difficulty: 15
        pass:
        fail:
      cost:
        initial:
        - user:cur_fp: -10
  trigger:
  - frequency: round
    target:
    - supertype: creature
    - supertype: object
    area: blast,2
    target:apply():
    - name: fire
      damage_cur_hp: user:attribute.intelligence.arcane.evocation/2.roll()
    resist:
    - target:dexterity.reflex.roll(): user:attribute.intelligence.arcane
      pass:
      fail:
  duration:
    frequency: round
    length: 10

---

entity:
  name: scroll
  supertype: object
  type: arcane
  subtype: scroll
  range: 0
  target:
  - self
  slot:
  - hand
  attribute:
    physique: 1
    intelligence.arcane: user:attribute.intelligence.arcane
    attribute.intelligence.arcane.evocation: user:attribute.intelligence.arcane.evocation
  inventory:
    inventory_rules:
      slots_only: true
      quantity_allowed: 1
      type_allowed:
      - type: miracle
      - type: arcane
    list:
    - name: aura of fire
      quantity: 1
      equipped: true
  action:
    use:
    - description: cast the spell stored in the scroll
      target:use_inventory(): aura of fire

...